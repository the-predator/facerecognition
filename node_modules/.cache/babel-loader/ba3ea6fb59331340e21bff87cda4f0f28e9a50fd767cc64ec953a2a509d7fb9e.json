{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\negiv\\\\Desktop\\\\React\\\\facerecognition\\\\src\\\\components\\\\detectedImg.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport * as faceapi from 'face-api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Detect(_ref) {\n  _s();\n  let {\n    url\n  } = _ref;\n  const imgRef = React.useRef();\n  const canvasRef = React.useRef();\n  const [faces, setFaces] = React.useState([]);\n  const handleImage = async () => {\n    console.log(url);\n    const detections = await faceapi.detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\n    console.log(detections);\n    faceapi.matchDimensions(canvasRef.current, {\n      width: 440,\n      height: 500\n    });\n    const resized = faceapi.resizeResults(detections, {\n      width: 440,\n      height: 500\n    });\n    console.log(resized);\n    faceapi.draw.drawDetections(canvasRef.current, resized);\n  };\n  React.useEffect(() => {\n    const loadModels = () => {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(handleImage).catch(e => console.log(e));\n    };\n    imgRef.current && loadModels();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      ref: imgRef,\n      crossOrigin: \"anonymous\",\n      src: url,\n      alt: \"image\",\n      style: {\n        width: '440px',\n        height: '500px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        width: '440',\n        height: '500px',\n        position: \"absolute\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(Detect, \"cxajjg+1SuFEnZ0rbQyOk0OnlTg=\");\n_c = Detect;\nexport default Detect;\nvar _c;\n$RefreshReg$(_c, \"Detect\");","map":{"version":3,"names":["React","faceapi","Detect","url","imgRef","useRef","canvasRef","faces","setFaces","useState","handleImage","console","log","detections","detectAllFaces","current","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","innerHTML","createCanvasFromMedia","matchDimensions","width","height","resized","resizeResults","draw","drawDetections","useEffect","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e","display","justifyContent","position"],"sources":["C:/Users/negiv/Desktop/React/facerecognition/src/components/detectedImg.jsx"],"sourcesContent":["import React from \"react\";\r\nimport * as faceapi from 'face-api.js';\r\n\r\nfunction Detect({url}){\r\n    const imgRef = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const [faces, setFaces] = React.useState([])\r\n\r\n  const handleImage = async () => {\r\n    console.log(url);\r\n    const detections = await faceapi\r\n    .detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions())\r\n    .withFaceLandmarks()\r\n    .withFaceExpressions();\r\n    \r\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\r\n    \r\n    console.log(detections);\r\n    faceapi.matchDimensions(canvasRef.current, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n\r\n    const resized = faceapi.resizeResults(detections, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n    console.log(resized);\r\n    faceapi.draw.drawDetections(canvasRef.current, resized);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  return(\r\n    <div style={{display: 'flex',justifyContent: \"center\"}}>\r\n       <img ref={imgRef} \r\n      crossOrigin=\"anonymous\"\r\n      src={url}\r\n      alt=\"image\" \r\n      style={{width: '440px', height: '500px'}}\r\n      />\r\n      <canvas ref={canvasRef} \r\n      style={{width: '440', height: '500px', position: \"absolute\"}}>\r\n      </canvas>\r\n      \r\n       </div>\r\n  )\r\n}\r\n\r\nexport default Detect;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,OAAO,MAAM,aAAa;AAAC;AAEvC,SAASC,MAAM,OAAO;EAAA;EAAA,IAAN;IAACC;EAAG,CAAC;EACjB,MAAMC,MAAM,GAAGJ,KAAK,CAACK,MAAM,EAAE;EAC/B,MAAMC,SAAS,GAAGN,KAAK,CAACK,MAAM,EAAE;EAChC,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGR,KAAK,CAACS,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMC,WAAW,GAAG,YAAY;IAC9BC,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC;IAChB,MAAMU,UAAU,GAAG,MAAMZ,OAAO,CAC/Ba,cAAc,CAACV,MAAM,CAACW,OAAO,EAAE,IAAId,OAAO,CAACe,uBAAuB,EAAE,CAAC,CACrEC,iBAAiB,EAAE,CACnBC,mBAAmB,EAAE;IAEtBZ,SAAS,CAACS,OAAO,CAACI,SAAS,GAAGlB,OAAO,CAACmB,qBAAqB,CAAChB,MAAM,CAACW,OAAO,CAAC;IAE3EJ,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACvBZ,OAAO,CAACoB,eAAe,CAACf,SAAS,CAACS,OAAO,EAAE;MACzCO,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,OAAO,GAAGvB,OAAO,CAACwB,aAAa,CAACZ,UAAU,EAAE;MAChDS,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IACFZ,OAAO,CAACC,GAAG,CAACY,OAAO,CAAC;IACpBvB,OAAO,CAACyB,IAAI,CAACC,cAAc,CAACrB,SAAS,CAACS,OAAO,EAAES,OAAO,CAAC;EACzD,CAAC;EAEDxB,KAAK,CAAC4B,SAAS,CAAC,MAAM;IACpB,MAAMC,UAAU,GAAG,MAAM;MACvBC,OAAO,CAACC,GAAG,CAAC,CACV9B,OAAO,CAAC+B,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAAC,UAAU,CAAC,EACrDjC,OAAO,CAAC+B,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAAC,SAAS,CAAC,EACrDjC,OAAO,CAAC+B,IAAI,CAACI,iBAAiB,CAACF,WAAW,CAAC,SAAS,CAAC,CACtD,CAAC,CACCG,IAAI,CAAC3B,WAAW,CAAC,CACjB4B,KAAK,CAAEC,CAAC,IAAK5B,OAAO,CAACC,GAAG,CAAC2B,CAAC,CAAC,CAAC;IACjC,CAAC;IAEDnC,MAAM,CAACW,OAAO,IAAIc,UAAU,EAAE;EAChC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAK,KAAK,EAAE;MAACW,OAAO,EAAE,MAAM;MAACC,cAAc,EAAE;IAAQ,CAAE;IAAA,wBACpD;MAAK,GAAG,EAAErC,MAAO;MAClB,WAAW,EAAC,WAAW;MACvB,GAAG,EAAED,GAAI;MACT,GAAG,EAAC,OAAO;MACX,KAAK,EAAE;QAACmB,KAAK,EAAE,OAAO;QAAEC,MAAM,EAAE;MAAO;IAAE;MAAA;MAAA;MAAA;IAAA,QACvC,eACF;MAAQ,GAAG,EAAEjB,SAAU;MACvB,KAAK,EAAE;QAACgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE,OAAO;QAAEmB,QAAQ,EAAE;MAAU;IAAE;MAAA;MAAA;MAAA;IAAA,QACpD;EAAA;IAAA;IAAA;IAAA;EAAA,QAEF;AAEb;AAAC,GAxDQxC,MAAM;AAAA,KAANA,MAAM;AA0Df,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}