{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\negiv\\\\Desktop\\\\React\\\\facerecognition\\\\src\\\\components\\\\detectedImg.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport * as faceapi from 'face-api.js';\nimport Img from \"./img\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Detect(_ref) {\n  _s();\n  let {\n    url\n  } = _ref;\n  const imgRef = React.useRef();\n  const canvasRef = React.useRef();\n  const [faces, setFaces] = React.useState([]);\n  const handleImage = async () => {\n    console.log(url);\n    const detections = await faceapi.detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\n    console.log(detections);\n    faceapi.matchDimensions(canvasRef.current, {\n      width: 440,\n      height: 500\n    });\n    const resized = faceapi.resizeResults(detections, {\n      width: 440,\n      height: 500\n    });\n    console.log(resized);\n    faceapi.draw.drawDetections(canvasRef.current, resized);\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n  };\n  React.useEffect(() => {\n    const loadModels = () => {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(handleImage).catch(e => console.log(e));\n    };\n    imgRef.current && loadModels();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Img, {\n    url: url,\n    imgRef: imgRef,\n    canvasRef: canvasRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 6\n  }, this);\n}\n_s(Detect, \"cxajjg+1SuFEnZ0rbQyOk0OnlTg=\");\n_c = Detect;\nexport default Detect;\nvar _c;\n$RefreshReg$(_c, \"Detect\");","map":{"version":3,"names":["React","faceapi","Img","Detect","url","imgRef","useRef","canvasRef","faces","setFaces","useState","handleImage","console","log","detections","detectAllFaces","current","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","innerHTML","createCanvasFromMedia","matchDimensions","width","height","resized","resizeResults","draw","drawDetections","drawFaceExpressions","useEffect","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e"],"sources":["C:/Users/negiv/Desktop/React/facerecognition/src/components/detectedImg.jsx"],"sourcesContent":["import React from \"react\";\r\nimport * as faceapi from 'face-api.js';\r\nimport Img from \"./img\";\r\n\r\nfunction Detect({url}){\r\n    const imgRef = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const [faces, setFaces] = React.useState([])\r\n\r\n  const handleImage = async () => {\r\n    console.log(url);\r\n    const detections = await faceapi\r\n    .detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions())\r\n    .withFaceLandmarks()\r\n    .withFaceExpressions();\r\n    \r\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\r\n    \r\n    console.log(detections);\r\n    faceapi.matchDimensions(canvasRef.current, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n\r\n    const resized = faceapi.resizeResults(detections, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n    console.log(resized);\r\n    faceapi.draw.drawDetections(canvasRef.current, resized);\r\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  return(\r\n     <Img url={url} \r\n     imgRef={imgRef}\r\n     canvasRef={canvasRef}\r\n     />\r\n  )\r\n}\r\n\r\nexport default Detect;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,OAAO,MAAM,aAAa;AACtC,OAAOC,GAAG,MAAM,OAAO;AAAC;AAExB,SAASC,MAAM,OAAO;EAAA;EAAA,IAAN;IAACC;EAAG,CAAC;EACjB,MAAMC,MAAM,GAAGL,KAAK,CAACM,MAAM,EAAE;EAC/B,MAAMC,SAAS,GAAGP,KAAK,CAACM,MAAM,EAAE;EAChC,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMC,WAAW,GAAG,YAAY;IAC9BC,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC;IAChB,MAAMU,UAAU,GAAG,MAAMb,OAAO,CAC/Bc,cAAc,CAACV,MAAM,CAACW,OAAO,EAAE,IAAIf,OAAO,CAACgB,uBAAuB,EAAE,CAAC,CACrEC,iBAAiB,EAAE,CACnBC,mBAAmB,EAAE;IAEtBZ,SAAS,CAACS,OAAO,CAACI,SAAS,GAAGnB,OAAO,CAACoB,qBAAqB,CAAChB,MAAM,CAACW,OAAO,CAAC;IAE3EJ,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACvBb,OAAO,CAACqB,eAAe,CAACf,SAAS,CAACS,OAAO,EAAE;MACzCO,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,OAAO,GAAGxB,OAAO,CAACyB,aAAa,CAACZ,UAAU,EAAE;MAChDS,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IACFZ,OAAO,CAACC,GAAG,CAACY,OAAO,CAAC;IACpBxB,OAAO,CAAC0B,IAAI,CAACC,cAAc,CAACrB,SAAS,CAACS,OAAO,EAAES,OAAO,CAAC;IACvDxB,OAAO,CAAC0B,IAAI,CAACE,mBAAmB,CAACtB,SAAS,CAACS,OAAO,EAAES,OAAO,CAAC;EAC9D,CAAC;EAEDzB,KAAK,CAAC8B,SAAS,CAAC,MAAM;IACpB,MAAMC,UAAU,GAAG,MAAM;MACvBC,OAAO,CAACC,GAAG,CAAC,CACVhC,OAAO,CAACiC,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAAC,UAAU,CAAC,EACrDnC,OAAO,CAACiC,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAAC,SAAS,CAAC,EACrDnC,OAAO,CAACiC,IAAI,CAACI,iBAAiB,CAACF,WAAW,CAAC,SAAS,CAAC,CACtD,CAAC,CACCG,IAAI,CAAC5B,WAAW,CAAC,CACjB6B,KAAK,CAAEC,CAAC,IAAK7B,OAAO,CAACC,GAAG,CAAC4B,CAAC,CAAC,CAAC;IACjC,CAAC;IAEDpC,MAAM,CAACW,OAAO,IAAIe,UAAU,EAAE;EAChC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACG,QAAC,GAAG;IAAC,GAAG,EAAE3B,GAAI;IACd,MAAM,EAAEC,MAAO;IACf,SAAS,EAAEE;EAAU;IAAA;IAAA;IAAA;EAAA,QACnB;AAEP;AAAC,GAjDQJ,MAAM;AAAA,KAANA,MAAM;AAmDf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}