{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\negiv\\\\Desktop\\\\React\\\\facerecognition\\\\src\\\\components\\\\detectedImg.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport * as faceapi from 'face-api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Detect() {\n  _s();\n  const imgRef = React.useRef();\n  const canvasRef = React.useRef();\n  const [faces, setFaces] = React.useState([]);\n  const handleImage = async () => {\n    const detections = await faceapi.detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\n    faceapi.matchDimensions(canvasRef.current, {\n      width: 500,\n      height: 500\n    });\n    const resized = faceapi.resizeResults(detections, {\n      width: 500,\n      height: 500\n    });\n    faceapi.draw.drawDetections(canvasRef.current, resized);\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n  };\n  React.useEffect(() => {\n    const loadModels = () => {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(handleImage).catch(e => console.log(e));\n    };\n    imgRef.current && loadModels();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      ref: imgRef,\n      crossOrigin: \"anonymous\",\n      src: props.url,\n      alt: \"image\",\n      style: {\n        width: '500px',\n        height: '500px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        width: '500px',\n        height: '500px',\n        position: \"absolute\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(Detect, \"cxajjg+1SuFEnZ0rbQyOk0OnlTg=\");\n_c = Detect;\nexport default Detect;\nvar _c;\n$RefreshReg$(_c, \"Detect\");","map":{"version":3,"names":["React","faceapi","Detect","imgRef","useRef","canvasRef","faces","setFaces","useState","handleImage","detections","detectAllFaces","current","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","innerHTML","createCanvasFromMedia","matchDimensions","width","height","resized","resizeResults","draw","drawDetections","drawFaceExpressions","useEffect","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e","console","log","display","props","url","position"],"sources":["C:/Users/negiv/Desktop/React/facerecognition/src/components/detectedImg.jsx"],"sourcesContent":["import React from \"react\";\r\nimport * as faceapi from 'face-api.js';\r\n\r\nfunction Detect(){\r\n    const imgRef = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const [faces, setFaces] = React.useState([])\r\n\r\n  const handleImage = async () => {\r\n    const detections = await faceapi\r\n    .detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions())\r\n    .withFaceLandmarks()\r\n    .withFaceExpressions();\r\n    \r\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\r\n\r\n    faceapi.matchDimensions(canvasRef.current, {\r\n      width : 500,\r\n      height: 500\r\n    });\r\n\r\n    const resized = faceapi.resizeResults(detections, {\r\n      width : 500,\r\n      height: 500\r\n    })\r\n    faceapi.draw.drawDetections(canvasRef.current, resized);\r\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  return(\r\n    <div style={{display: 'flex'}}>\r\n       <img ref={imgRef} \r\n      crossOrigin=\"anonymous\"\r\n      src={props.url} \r\n      alt=\"image\" \r\n      style={{width: '500px', height: '500px'}}\r\n      />\r\n      <canvas ref={canvasRef} \r\n      style={{width: '500px', height: '500px', position: \"absolute\"}}>\r\n      </canvas>\r\n      \r\n       </div>\r\n  )\r\n}\r\n\r\nexport default Detect;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,OAAO,MAAM,aAAa;AAAC;AAEvC,SAASC,MAAM,GAAE;EAAA;EACb,MAAMC,MAAM,GAAGH,KAAK,CAACI,MAAM,EAAE;EAC/B,MAAMC,SAAS,GAAGL,KAAK,CAACI,MAAM,EAAE;EAChC,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGP,KAAK,CAACQ,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMC,WAAW,GAAG,YAAY;IAC9B,MAAMC,UAAU,GAAG,MAAMT,OAAO,CAC/BU,cAAc,CAACR,MAAM,CAACS,OAAO,EAAE,IAAIX,OAAO,CAACY,uBAAuB,EAAE,CAAC,CACrEC,iBAAiB,EAAE,CACnBC,mBAAmB,EAAE;IAEtBV,SAAS,CAACO,OAAO,CAACI,SAAS,GAAGf,OAAO,CAACgB,qBAAqB,CAACd,MAAM,CAACS,OAAO,CAAC;IAE3EX,OAAO,CAACiB,eAAe,CAACb,SAAS,CAACO,OAAO,EAAE;MACzCO,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,OAAO,GAAGpB,OAAO,CAACqB,aAAa,CAACZ,UAAU,EAAE;MAChDS,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IACFnB,OAAO,CAACsB,IAAI,CAACC,cAAc,CAACnB,SAAS,CAACO,OAAO,EAAES,OAAO,CAAC;IACvDpB,OAAO,CAACsB,IAAI,CAACE,mBAAmB,CAACpB,SAAS,CAACO,OAAO,EAAES,OAAO,CAAC;EAC9D,CAAC;EAEDrB,KAAK,CAAC0B,SAAS,CAAC,MAAM;IACpB,MAAMC,UAAU,GAAG,MAAM;MACvBC,OAAO,CAACC,GAAG,CAAC,CACV5B,OAAO,CAAC6B,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAAC,UAAU,CAAC,EACrD/B,OAAO,CAAC6B,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAAC,SAAS,CAAC,EACrD/B,OAAO,CAAC6B,IAAI,CAACI,iBAAiB,CAACF,WAAW,CAAC,SAAS,CAAC,CACtD,CAAC,CACCG,IAAI,CAAC1B,WAAW,CAAC,CACjB2B,KAAK,CAAEC,CAAC,IAAKC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAAC;IACjC,CAAC;IAEDlC,MAAM,CAACS,OAAO,IAAIe,UAAU,EAAE;EAChC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAK,KAAK,EAAE;MAACa,OAAO,EAAE;IAAM,CAAE;IAAA,wBAC3B;MAAK,GAAG,EAAErC,MAAO;MAClB,WAAW,EAAC,WAAW;MACvB,GAAG,EAAEsC,KAAK,CAACC,GAAI;MACf,GAAG,EAAC,OAAO;MACX,KAAK,EAAE;QAACvB,KAAK,EAAE,OAAO;QAAEC,MAAM,EAAE;MAAO;IAAE;MAAA;MAAA;MAAA;IAAA,QACvC,eACF;MAAQ,GAAG,EAAEf,SAAU;MACvB,KAAK,EAAE;QAACc,KAAK,EAAE,OAAO;QAAEC,MAAM,EAAE,OAAO;QAAEuB,QAAQ,EAAE;MAAU;IAAE;MAAA;MAAA;MAAA;IAAA,QACtD;EAAA;IAAA;IAAA;IAAA;EAAA,QAEF;AAEb;AAAC,GAtDQzC,MAAM;AAAA,KAANA,MAAM;AAwDf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}