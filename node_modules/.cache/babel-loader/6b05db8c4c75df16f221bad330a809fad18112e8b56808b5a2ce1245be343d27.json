{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\negiv\\\\Desktop\\\\React\\\\facerecognition\\\\src\\\\components\\\\detectedImg.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport * as faceapi from 'face-api.js';\nimport Img from \"./img\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Detect(_ref) {\n  _s();\n  let {\n    url\n  } = _ref;\n  const imgRef = React.useRef();\n  const canvasRef = React.useRef();\n  const [faces, setFaces] = React.useState([]);\n  const handleImage = async () => {\n    const detections = await faceapi.detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\n    console.log(detections);\n    faceapi.matchDimensions(canvasRef.current, {\n      width: 440,\n      height: 500\n    });\n    const resized = faceapi.resizeResults(detections, {\n      width: 440,\n      height: 500\n    });\n    console.log(resized);\n    faceapi.draw.drawDetections(canvasRef.current, resized);\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n  };\n  React.useEffect(() => {\n    const loadModels = () => {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(imgRef && handleImage).catch(e => console.log(e));\n    };\n    imgRef.current && loadModels();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Img, {\n      url: url,\n      imgRef: imgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        width: '440',\n        height: '500px',\n        position: \"absolute\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(Detect, \"cxajjg+1SuFEnZ0rbQyOk0OnlTg=\");\n_c = Detect;\nexport default Detect;\nvar _c;\n$RefreshReg$(_c, \"Detect\");","map":{"version":3,"names":["React","faceapi","Img","Detect","url","imgRef","useRef","canvasRef","faces","setFaces","useState","handleImage","detections","detectAllFaces","current","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","innerHTML","createCanvasFromMedia","console","log","matchDimensions","width","height","resized","resizeResults","draw","drawDetections","drawFaceExpressions","useEffect","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e","display","justifyContent","position"],"sources":["C:/Users/negiv/Desktop/React/facerecognition/src/components/detectedImg.jsx"],"sourcesContent":["import React from \"react\";\r\nimport * as faceapi from 'face-api.js';\r\nimport Img from \"./img\";\r\n\r\nfunction Detect({url}){\r\n  const imgRef = React.useRef();\r\n  const canvasRef = React.useRef();\r\n  const [faces, setFaces] = React.useState([])\r\n\r\n  const handleImage = async () => {\r\n    const detections = await faceapi\r\n    .detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions())\r\n    .withFaceLandmarks()\r\n    .withFaceExpressions();\r\n    \r\n    canvasRef.current.innerHTML = faceapi.createCanvasFromMedia(imgRef.current);\r\n    \r\n    console.log(detections);\r\n    faceapi.matchDimensions(canvasRef.current, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n\r\n    const resized = faceapi.resizeResults(detections, {\r\n      width : 440,\r\n      height: 500\r\n    });\r\n    console.log(resized);\r\n    faceapi.draw.drawDetections(canvasRef.current, resized);\r\n    faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\r\n  };\r\n\r\n   React.useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"./models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(imgRef && handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  return(\r\n    <div style={{display: 'flex',justifyContent: \"center\"}}>\r\n    <Img url={url} imgRef={imgRef} />\r\n   <canvas ref={canvasRef} \r\n   style={{width: '440', height: '500px', position: \"absolute\"}}>\r\n   </canvas>\r\n   \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Detect;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,OAAO,MAAM,aAAa;AACtC,OAAOC,GAAG,MAAM,OAAO;AAAC;AAExB,SAASC,MAAM,OAAO;EAAA;EAAA,IAAN;IAACC;EAAG,CAAC;EACnB,MAAMC,MAAM,GAAGL,KAAK,CAACM,MAAM,EAAE;EAC7B,MAAMC,SAAS,GAAGP,KAAK,CAACM,MAAM,EAAE;EAChC,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMC,WAAW,GAAG,YAAY;IAC9B,MAAMC,UAAU,GAAG,MAAMX,OAAO,CAC/BY,cAAc,CAACR,MAAM,CAACS,OAAO,EAAE,IAAIb,OAAO,CAACc,uBAAuB,EAAE,CAAC,CACrEC,iBAAiB,EAAE,CACnBC,mBAAmB,EAAE;IAEtBV,SAAS,CAACO,OAAO,CAACI,SAAS,GAAGjB,OAAO,CAACkB,qBAAqB,CAACd,MAAM,CAACS,OAAO,CAAC;IAE3EM,OAAO,CAACC,GAAG,CAACT,UAAU,CAAC;IACvBX,OAAO,CAACqB,eAAe,CAACf,SAAS,CAACO,OAAO,EAAE;MACzCS,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,OAAO,GAAGxB,OAAO,CAACyB,aAAa,CAACd,UAAU,EAAE;MAChDW,KAAK,EAAG,GAAG;MACXC,MAAM,EAAE;IACV,CAAC,CAAC;IACFJ,OAAO,CAACC,GAAG,CAACI,OAAO,CAAC;IACpBxB,OAAO,CAAC0B,IAAI,CAACC,cAAc,CAACrB,SAAS,CAACO,OAAO,EAAEW,OAAO,CAAC;IACvDxB,OAAO,CAAC0B,IAAI,CAACE,mBAAmB,CAACtB,SAAS,CAACO,OAAO,EAAEW,OAAO,CAAC;EAC9D,CAAC;EAEAzB,KAAK,CAAC8B,SAAS,CAAC,MAAM;IACrB,MAAMC,UAAU,GAAG,MAAM;MACvBC,OAAO,CAACC,GAAG,CAAC,CACVhC,OAAO,CAACiC,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAAC,UAAU,CAAC,EACrDnC,OAAO,CAACiC,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAAC,SAAS,CAAC,EACrDnC,OAAO,CAACiC,IAAI,CAACI,iBAAiB,CAACF,WAAW,CAAC,SAAS,CAAC,CACtD,CAAC,CACCG,IAAI,CAAClC,MAAM,IAAIM,WAAW,CAAC,CAC3B6B,KAAK,CAAEC,CAAC,IAAKrB,OAAO,CAACC,GAAG,CAACoB,CAAC,CAAC,CAAC;IACjC,CAAC;IAEDpC,MAAM,CAACS,OAAO,IAAIiB,UAAU,EAAE;EAChC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAK,KAAK,EAAE;MAACW,OAAO,EAAE,MAAM;MAACC,cAAc,EAAE;IAAQ,CAAE;IAAA,wBACvD,QAAC,GAAG;MAAC,GAAG,EAAEvC,GAAI;MAAC,MAAM,EAAEC;IAAO;MAAA;MAAA;MAAA;IAAA,QAAG,eAClC;MAAQ,GAAG,EAAEE,SAAU;MACvB,KAAK,EAAE;QAACgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE,OAAO;QAAEoB,QAAQ,EAAE;MAAU;IAAE;MAAA;MAAA;MAAA;IAAA,QACpD;EAAA;IAAA;IAAA;IAAA;EAAA,QAEF;AAEV;AAAC,GAnDQzC,MAAM;AAAA,KAANA,MAAM;AAqDf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}